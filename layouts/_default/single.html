{{ define "main" }}
  <h1>{{ .Title }}</h1>
  <h2>{{ .Params.Universit√© }}, {{ .Params.Niveau }} </h2>

  <!-- Download course material -->

  <section id='material'>

    {{/* Ok so here is how you avoid code duplication here. You have
         three options here.

       1. Use partial templates. This is the prefered solution
          according to Haiku and 4o. BUT, it is a pain to transfer
          variables to the template. Normally, the syntax for a template
          is:

            {\{  template your_template . }}
        
          (Escaping this, otherwise Hugo screams.)
          But here, we need extra args (glob, name, etc). A solution is
          to pass the page AND the context. This kinda works, for the
          price of horrible argument syntax and an extra file. See this:

            https://mertbakir.gitlab.io/hugo/pass-arguments-in-partials-hugo/

      2. Use shortcodes. My understanding is that it's basically the
         same as templates, but shortcodes are to be used in contents,
         not in layout definitions. And indeed, I tried to use  a
         template with

           {\{< my_shortcode >}}

         (Once again escaping.)
         and Hugo screamed at me because they didn't like the < and >.
         And indeed:

           https://discourse.gohugo.io/t/highlight-html-unexpected-in-command-built-site-for-language-en/4468

         In any case, I don't really care, as the problems I have with
         partials, I'd have with shortcodes.

      3. Good ol' loop. Yeah, that's the one. */}}

    {{ range $resource := slice (dict "glob" "*-poly.*"   "name" "Poly")
                                (dict "glob" "*-td.*"     "name" "TD")
                                (dict "glob" "*-anales.*" "name" "Anales")
                                (dict "glob" "*-misc.*"   "name" "Misc")
    }}
      {{/* There is only one file per material category (poly, td, etc),
           so one can use GetMatch instead of Match. */}}

      {{ with $.Resources.GetMatch .glob }}
        <a href='{{ . }}' class='material-resource-div'
                          data-type='{{ $resource.name }}'>
          <h1 class='material-resource-title'>{{ $resource.name }}</h1>
        </a>
      {{ end }}
    {{ end }}

  </section>

  <section id='meta'>

    <div id='content'>
    
      {{ .Content }}

    </div>

    <div id='stats'>

    </div>

  </section>

{{ end }}
